package question6;

import java.util.Arrays;
import java.util.Collection;

import org.junit.runners.Parameterized;
import org.junit.runners.Parameterized.Parameters;

import question5_classes.InvalidPasswordException;
import question5_classes.User;

import org.junit.Test;
import org.junit.runner.RunWith;

import static org.hamcrest.CoreMatchers.equalTo;
import static org.junit.Assert.assertThat;

@RunWith(Parameterized.class)
public class UserParameterizedTest {
	
	private Integer userId;
	private String name;
	private String password;
	private Double javaScore;
	private Double sqlScore;
	private Integer expectedCredits;
	
	User badInput = new User();
		
	public UserParameterizedTest(Integer userId, String name, String password, Double javaScore,
									Double sqlScore, Integer expectedCredits)  {
		this.userId = userId;
		this.name = name;
		this.password = password;
		this.javaScore = javaScore;
		this.sqlScore = sqlScore;
		this.expectedCredits = expectedCredits;
		
	}
	
	
	@Parameters()
    public static Collection<Object[]> data() {
        return Arrays.asList(
                new Object[][] {
                		{ 1, "trace", "trace12345", 85.0, 90.0, 2 },
                		{ 2, "tom", "tom12345", 80.0, 65.0, 1 },
                		{ 3, "salah", "sheber123", 100.0, 100.0, 2 },
                		{ 4, "chen", "chen12345", 69.0, 69.0, 0 },
                		{ 5, "goutham", "goutham12345", 90.0, 90.0, 2 }
                		});
    }
    
      
    @Test
	public void testCalculateCredits() {
    	   	
    	User u = new User(userId, name, password, javaScore, sqlScore);
    	assertThat(u.calculateCredits(), equalTo(expectedCredits));    	
    }
    
    @Test(expected = InvalidPasswordException.class) 
    public void testPassword() {
		badInput.setPassword("she");
   	}
	
    @Test(expected = IllegalArgumentException.class)
    public void testUser() {
    	badInput.setName("goutham23");
    }
	
    @Test(expected = IllegalArgumentException.class)
    public void testSetJava() {
    	badInput.setJavaScore(102.0);
    }
    
    @Test(expected = IllegalArgumentException.class)
    public void testSetSQL() {
    	badInput.setSqlScore(-32.0);
    }
}
