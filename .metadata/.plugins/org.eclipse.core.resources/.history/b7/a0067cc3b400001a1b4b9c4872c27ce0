package servlets.project03;

import java.io.IOException;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;

public class UserDAO {

	static Connection conn = null;
	static MariaDBConnection connect = new MariaDBConnection();
	
	public static void testConnection() {
		
		try {
			conn = connect.getConnection();
			if(conn != null) {
				System.out.println("Connected");
			}
		}
		catch(Exception e) {
			e.getMessage();
			System.out.println("Database connection failed.");
		}
		
	}

	public static void validateLogin(String username, String password) {

		//create delete query format
		String deleteQuery = "Select password FROM users WHERE username=?";
		
		try {
			//creating a local instance of the connection object and a statement object
			conn = connect.getConnection();
			//creating an instance of prepareStatement, calling 
			//prepareStatement method of connection object, with query as parameter
			PreparedStatement stmt = conn.prepareStatement(deleteQuery);
			
			//setting the column values of the delete query
			stmt.setString(1, username);			
			
			//executing delete query
			ResultSet rs = stmt.executeQuery();			
			//close connection
			conn.close();
			System.out.println("Logged in");
		}
		catch(Exception e) {
			System.out.println("Login failed");
		}
				
	}
	}
}
